{"soba_userInput":"Create a composite state to model ending the session with the ATM, in full detail","soba_metaModelContext":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<ecore:EPackage xmi:version=\"2.0\" xmlns:xmi=\"http://www.omg.org/XMI\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:ecore=\"http://www.eclipse.org/emf/2002/Ecore\" name=\"HierarchicalStateMachine\" nsURI=\"http://statemachines/0.1\" nsPrefix=\"hsm\">\r\n  <eClassifiers xsi:type=\"ecore:EClass\" name=\"StateMachine\">\r\n    <eStructuralFeatures xsi:type=\"ecore:EReference\" name=\"states\" upperBound=\"-1\" eType=\"//State\" containment=\"true\"/>\r\n    <eStructuralFeatures xsi:type=\"ecore:EReference\" name=\"transitions\" upperBound=\"-1\" eType=\"//Transition\" containment=\"true\"/>\r\n    <eStructuralFeatures xsi:type=\"ecore:EAttribute\" name=\"description\">\r\n      <eType xsi:type=\"ecore:EDataType\" href=\"http://www.eclipse.org/emf/2002/Ecore#//EString\"/>\r\n    <\/eStructuralFeatures>\r\n  <\/eClassifiers>\r\n  <eClassifiers xsi:type=\"ecore:EClass\" name=\"State\">\r\n    <eStructuralFeatures xsi:type=\"ecore:EAttribute\" name=\"isInitial\">\r\n      <eType xsi:type=\"ecore:EDataType\" href=\"http://www.eclipse.org/emf/2002/Ecore#//EBoolean\"/>\r\n    <\/eStructuralFeatures>\r\n    <eStructuralFeatures xsi:type=\"ecore:EAttribute\" name=\"isFinal\">\r\n      <eType xsi:type=\"ecore:EDataType\" href=\"http://www.eclipse.org/emf/2002/Ecore#//EBoolean\"/>\r\n    <\/eStructuralFeatures>\r\n    <eStructuralFeatures xsi:type=\"ecore:EAttribute\" name=\"name\">\r\n      <eType xsi:type=\"ecore:EDataType\" href=\"http://www.eclipse.org/emf/2002/Ecore#//EString\"/>\r\n    <\/eStructuralFeatures>\r\n  <\/eClassifiers>\r\n  <eClassifiers xsi:type=\"ecore:EClass\" name=\"Transition\">\r\n    <eStructuralFeatures xsi:type=\"ecore:EReference\" name=\"from\" lowerBound=\"1\" eType=\"//State\"/>\r\n    <eStructuralFeatures xsi:type=\"ecore:EReference\" name=\"to\" lowerBound=\"1\" eType=\"//State\"/>\r\n    <eStructuralFeatures xsi:type=\"ecore:EReference\" name=\"event\" eType=\"//Event\" containment=\"true\"/>\r\n    <eStructuralFeatures xsi:type=\"ecore:EReference\" name=\"action\" eType=\"//Action\" containment=\"true\"/>\r\n    <eStructuralFeatures xsi:type=\"ecore:EReference\" name=\"guard\" eType=\"//Guard\" containment=\"true\"/>\r\n  <\/eClassifiers>\r\n  <eClassifiers xsi:type=\"ecore:EClass\" name=\"Event\">\r\n    <eStructuralFeatures xsi:type=\"ecore:EAttribute\" name=\"name\">\r\n      <eType xsi:type=\"ecore:EDataType\" href=\"http://www.eclipse.org/emf/2002/Ecore#//EString\"/>\r\n    <\/eStructuralFeatures>\r\n  <\/eClassifiers>\r\n  <eClassifiers xsi:type=\"ecore:EClass\" name=\"CompositeState\" eSuperTypes=\"//State //StateMachine\"/>\r\n  <eClassifiers xsi:type=\"ecore:EClass\" name=\"Action\">\r\n    <eStructuralFeatures xsi:type=\"ecore:EAttribute\" name=\"code\">\r\n      <eType xsi:type=\"ecore:EDataType\" href=\"http://www.eclipse.org/emf/2002/Ecore#//EString\"/>\r\n    <\/eStructuralFeatures>\r\n  <\/eClassifiers>\r\n  <eClassifiers xsi:type=\"ecore:EClass\" name=\"Guard\">\r\n    <eStructuralFeatures xsi:type=\"ecore:EAttribute\" name=\"condition\">\r\n      <eType xsi:type=\"ecore:EDataType\" href=\"http://www.eclipse.org/emf/2002/Ecore#//EString\"/>\r\n    <\/eStructuralFeatures>\r\n  <\/eClassifiers>\r\n  <eClassifiers xsi:type=\"ecore:EClass\" name=\"TimeEvent\" eSuperTypes=\"//Event\">\r\n    <eStructuralFeatures xsi:type=\"ecore:EAttribute\" name=\"time\">\r\n      <eType xsi:type=\"ecore:EDataType\" href=\"http://www.eclipse.org/emf/2002/Ecore#//EDouble\"/>\r\n    <\/eStructuralFeatures>\r\n  <\/eClassifiers>\r\n<\/ecore:EPackage>\r\n","recommendationPayload":{"xmi_id":"_eyhF0MyMEfCuhbiBFBlMQg","description":"ATM","___type___":"StateMachine","transitions":[],"states":[{"xmi_id":"_eyhF08yMEfCuhbiBFBlMQg","isInitial":false,"name":"Operational","description":"The ATM is working normally","___type___":"CompositeState","isFinal":false,"transitions":[{"xmi_id":"_eyhF3MyMEfCuhbiBFBlMQg","___type___":"Transition","from":"_eyhF1MyMEfCuhbiBFBlMQg","to":"_eyhF1cyMEfCuhbiBFBlMQg","event":{"xmi_id":"_eyhF3cyMEfCuhbiBFBlMQg","name":"card_detected","___type___":"Event"}},{"xmi_id":"_eyhF3syMEfCuhbiBFBlMQg","guard":{"xmi_id":"_eyhF4MyMEfCuhbiBFBlMQg","condition":"invalid card","___type___":"Guard"},"action":{"xmi_id":"_eyhF38yMEfCuhbiBFBlMQg","code":"eject card","___type___":"Action"},"___type___":"Transition","from":"_eyhF1cyMEfCuhbiBFBlMQg","to":"_eyhF1MyMEfCuhbiBFBlMQg"},{"xmi_id":"_eyhF4cyMEfCuhbiBFBlMQg","guard":{"xmi_id":"_eyhF4syMEfCuhbiBFBlMQg","condition":"valid card","___type___":"Guard"},"___type___":"Transition","from":"_eyhF1cyMEfCuhbiBFBlMQg","to":"_eyhF1syMEfCuhbiBFBlMQg"},{"xmi_id":"_eyhF48yMEfCuhbiBFBlMQg","action":{"xmi_id":"_eyhF5cyMEfCuhbiBFBlMQg","code":"eject card","___type___":"Action"},"___type___":"Transition","from":"_eyhF1syMEfCuhbiBFBlMQg","to":"_eyhF1MyMEfCuhbiBFBlMQg","event":{"xmi_id":"_eyhF5MyMEfCuhbiBFBlMQg","name":"time out","___type___":"TimeEvent","time":1000}},{"xmi_id":"_endT4","guard":{"xmi_id":"_endG2","condition":"user_authenticated","___type___":"Guard"},"action":{"xmi_id":"_endA4","code":"enter EndSession composite; begin return card substate","___type___":"Action"},"___type___":"Transition","from":"_eyhF18yMEfCuhbiBFBlMQg","to":"_endCS1","event":{"xmi_id":"_endE4","name":"end_session","___type___":"Event"}}],"states":[{"xmi_id":"_eyhF1MyMEfCuhbiBFBlMQg","isInitial":true,"name":"Idle","___type___":"State","isFinal":false},{"xmi_id":"_eyhF1cyMEfCuhbiBFBlMQg","isInitial":false,"name":"Card Inserted","___type___":"State","isFinal":false},{"xmi_id":"_eyhF1syMEfCuhbiBFBlMQg","isInitial":false,"name":"PIN entry","___type___":"State","isFinal":false},{"xmi_id":"_eyhF18yMEfCuhbiBFBlMQg","isInitial":false,"name":"MainMenu","___type___":"State","isFinal":false},{"xmi_id":"_eyhF2MyMEfCuhbiBFBlMQg","isInitial":false,"name":"Transaction","description":"This state models an ATM transaction","___type___":"CompositeState","isFinal":false,"transitions":[],"states":[{"xmi_id":"_eyhF2cyMEfCuhbiBFBlMQg","isInitial":false,"name":"Withdrawal","___type___":"State","isFinal":false},{"xmi_id":"_eyhF2syMEfCuhbiBFBlMQg","isInitial":false,"name":"BalanceInquiry","___type___":"State","isFinal":false},{"xmi_id":"_eyhF28yMEfCuhbiBFBlMQg","isInitial":false,"name":"Deposit","___type___":"State","isFinal":false}]},{"xmi_id":"_endCS1","isInitial":false,"name":"EndSession","description":"Models ending the user's session: return card, optionally print receipt, and finalize the session","___type___":"CompositeState","isFinal":false,"transitions":[{"xmi_id":"_endT1","action":{"xmi_id":"_endA1","code":"start printing receipt","___type___":"Action"},"___type___":"Transition","from":"_endS1","to":"_endS2","event":{"xmi_id":"_endE1","name":"receipt_requested","___type___":"Event"}},{"xmi_id":"_endT2","action":{"xmi_id":"_endA2","code":"complete print; eject card; display 'Thank you'","___type___":"Action"},"___type___":"Transition","from":"_endS2","to":"_endS3","event":{"xmi_id":"_endTE1","name":"print_timeout","___type___":"TimeEvent","time":2000}},{"xmi_id":"_endT3","guard":{"xmi_id":"_endG1","condition":"receipt_not_requested","___type___":"Guard"},"action":{"xmi_id":"_endA3","code":"eject card and display 'Goodbye'","___type___":"Action"},"___type___":"Transition","from":"_endS1","to":"_endS3"}],"states":[{"xmi_id":"_endS1","isInitial":true,"name":"ReturnCard","___type___":"State","isFinal":false},{"xmi_id":"_endS2","isInitial":false,"name":"PrintReceipt","___type___":"State","isFinal":false},{"xmi_id":"_endS3","isInitial":false,"name":"SessionEnded","___type___":"State","isFinal":true}]}]}]}}