{"soba_userInput":"Create a composite state to model a controller for media streaming in full detail","soba_metaModelContext":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<ecore:EPackage xmi:version=\"2.0\" xmlns:xmi=\"http://www.omg.org/XMI\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:ecore=\"http://www.eclipse.org/emf/2002/Ecore\" name=\"HierarchicalStateMachine\" nsURI=\"http://statemachines/0.1\" nsPrefix=\"hsm\">\r\n  <eClassifiers xsi:type=\"ecore:EClass\" name=\"StateMachine\">\r\n    <eStructuralFeatures xsi:type=\"ecore:EReference\" name=\"states\" upperBound=\"-1\" eType=\"//State\" containment=\"true\"/>\r\n    <eStructuralFeatures xsi:type=\"ecore:EReference\" name=\"transitions\" upperBound=\"-1\" eType=\"//Transition\" containment=\"true\"/>\r\n    <eStructuralFeatures xsi:type=\"ecore:EAttribute\" name=\"description\">\r\n      <eType xsi:type=\"ecore:EDataType\" href=\"http://www.eclipse.org/emf/2002/Ecore#//EString\"/>\r\n    <\/eStructuralFeatures>\r\n  <\/eClassifiers>\r\n  <eClassifiers xsi:type=\"ecore:EClass\" name=\"State\">\r\n    <eStructuralFeatures xsi:type=\"ecore:EAttribute\" name=\"isInitial\">\r\n      <eType xsi:type=\"ecore:EDataType\" href=\"http://www.eclipse.org/emf/2002/Ecore#//EBoolean\"/>\r\n    <\/eStructuralFeatures>\r\n    <eStructuralFeatures xsi:type=\"ecore:EAttribute\" name=\"isFinal\">\r\n      <eType xsi:type=\"ecore:EDataType\" href=\"http://www.eclipse.org/emf/2002/Ecore#//EBoolean\"/>\r\n    <\/eStructuralFeatures>\r\n    <eStructuralFeatures xsi:type=\"ecore:EAttribute\" name=\"name\">\r\n      <eType xsi:type=\"ecore:EDataType\" href=\"http://www.eclipse.org/emf/2002/Ecore#//EString\"/>\r\n    <\/eStructuralFeatures>\r\n  <\/eClassifiers>\r\n  <eClassifiers xsi:type=\"ecore:EClass\" name=\"Transition\">\r\n    <eStructuralFeatures xsi:type=\"ecore:EReference\" name=\"from\" lowerBound=\"1\" eType=\"//State\"/>\r\n    <eStructuralFeatures xsi:type=\"ecore:EReference\" name=\"to\" lowerBound=\"1\" eType=\"//State\"/>\r\n    <eStructuralFeatures xsi:type=\"ecore:EReference\" name=\"event\" eType=\"//Event\" containment=\"true\"/>\r\n    <eStructuralFeatures xsi:type=\"ecore:EReference\" name=\"action\" eType=\"//Action\" containment=\"true\"/>\r\n    <eStructuralFeatures xsi:type=\"ecore:EReference\" name=\"guard\" eType=\"//Guard\" containment=\"true\"/>\r\n  <\/eClassifiers>\r\n  <eClassifiers xsi:type=\"ecore:EClass\" name=\"Event\">\r\n    <eStructuralFeatures xsi:type=\"ecore:EAttribute\" name=\"name\">\r\n      <eType xsi:type=\"ecore:EDataType\" href=\"http://www.eclipse.org/emf/2002/Ecore#//EString\"/>\r\n    <\/eStructuralFeatures>\r\n  <\/eClassifiers>\r\n  <eClassifiers xsi:type=\"ecore:EClass\" name=\"CompositeState\" eSuperTypes=\"//State //StateMachine\"/>\r\n  <eClassifiers xsi:type=\"ecore:EClass\" name=\"Action\">\r\n    <eStructuralFeatures xsi:type=\"ecore:EAttribute\" name=\"code\">\r\n      <eType xsi:type=\"ecore:EDataType\" href=\"http://www.eclipse.org/emf/2002/Ecore#//EString\"/>\r\n    <\/eStructuralFeatures>\r\n  <\/eClassifiers>\r\n  <eClassifiers xsi:type=\"ecore:EClass\" name=\"Guard\">\r\n    <eStructuralFeatures xsi:type=\"ecore:EAttribute\" name=\"condition\">\r\n      <eType xsi:type=\"ecore:EDataType\" href=\"http://www.eclipse.org/emf/2002/Ecore#//EString\"/>\r\n    <\/eStructuralFeatures>\r\n  <\/eClassifiers>\r\n  <eClassifiers xsi:type=\"ecore:EClass\" name=\"TimeEvent\" eSuperTypes=\"//Event\">\r\n    <eStructuralFeatures xsi:type=\"ecore:EAttribute\" name=\"time\">\r\n      <eType xsi:type=\"ecore:EDataType\" href=\"http://www.eclipse.org/emf/2002/Ecore#//EDouble\"/>\r\n    <\/eStructuralFeatures>\r\n  <\/eClassifiers>\r\n<\/ecore:EPackage>\r\n","recommendationPayload":{"xmi_id":"_YLhjsMyMEfCuhbiBFBlMQg","description":"Media Player","___type___":"StateMachine","transitions":[{"xmi_id":"_YLhjtMyMEfCuhbiBFBlMQg","___type___":"Transition","from":"_YLhjscyMEfCuhbiBFBlMQg","to":"_YLhjssyMEfCuhbiBFBlMQg","event":{"xmi_id":"_YLhjtcyMEfCuhbiBFBlMQg","name":"pause","___type___":"Event"}},{"xmi_id":"_YLhjtsyMEfCuhbiBFBlMQg","___type___":"Transition","from":"_YLhjssyMEfCuhbiBFBlMQg","to":"_YLhjscyMEfCuhbiBFBlMQg"},{"xmi_id":"_YLhjuMyMEfCuhbiBFBlMQg","___type___":"Transition","from":"_YLhjs8yMEfCuhbiBFBlMQg","to":"_YLhjscyMEfCuhbiBFBlMQg","event":{"xmi_id":"_YLhjucyMEfCuhbiBFBlMQg","name":"play","___type___":"Event"}}],"states":[{"xmi_id":"_YLhjscyMEfCuhbiBFBlMQg","isInitial":false,"name":"Playing","___type___":"State","isFinal":false},{"xmi_id":"_YLhjssyMEfCuhbiBFBlMQg","isInitial":false,"name":"Pause","___type___":"State","isFinal":false},{"xmi_id":"_YLhjs8yMEfCuhbiBFBlMQg","isInitial":false,"name":"Stop","___type___":"State","isFinal":false},{"xmi_id":"_SC_StreamingController_001","isInitial":false,"name":"StreamingController","description":"Controller for managing streaming lifecycle: connection, buffering, playback, pause, stop and error handling","___type___":"CompositeState","isFinal":false,"transitions":[{"xmi_id":"_SCt_1","action":{"xmi_id":"_SCa_openConn_1","code":"openConnection();","___type___":"Action"},"___type___":"Transition","from":"_SCs_idle1","to":"_SCs_connect1","event":{"xmi_id":"_SCe_start_1","name":"startStream","___type___":"Event"}},{"xmi_id":"_SCt_2","guard":{"xmi_id":"_SCg_connEstablished_1","condition":"connectionEstablished == true","___type___":"Guard"},"action":{"xmi_id":"_SCa_initBuffer_1","code":"initializeBuffer();","___type___":"Action"},"___type___":"Transition","from":"_SCs_connect1","to":"_SCs_buffer1","event":{"xmi_id":"_SCe_connected_1","name":"connected","___type___":"Event"}},{"xmi_id":"_SCt_3","guard":{"xmi_id":"_SCg_bufferLevel_1","condition":"bufferLevel > 50","___type___":"Guard"},"action":{"xmi_id":"_SCa_startPlayback_1","code":"startPlayback();","___type___":"Action"},"___type___":"Transition","from":"_SCs_buffer1","to":"_SCs_stream1","event":{"xmi_id":"_SCe_bufferFilled_1","name":"bufferFilled","___type___":"Event"}},{"xmi_id":"_SCt_4","guard":{"xmi_id":"_SCg_retryExceeded_1","condition":"retryCount >= maxRetries","___type___":"Guard"},"action":{"xmi_id":"_SCa_bufferTimeout_1","code":"reportError('Buffer timeout'); closeConnection();","___type___":"Action"},"___type___":"Transition","from":"_SCs_buffer1","to":"_SCs_error1","event":{"xmi_id":"_SCte_bufferTimeout_1","name":"bufferTimeout","___type___":"TimeEvent","time":5000}},{"xmi_id":"_SCt_5","action":{"xmi_id":"_SCa_pause_1","code":"pausePlayback();","___type___":"Action"},"___type___":"Transition","from":"_SCs_stream1","to":"_SCs_paused1","event":{"xmi_id":"_SCe_pause_1","name":"pause","___type___":"Event"}},{"xmi_id":"_SCt_6","action":{"xmi_id":"_SCa_resume_1","code":"resumePlayback();","___type___":"Action"},"___type___":"Transition","from":"_SCs_paused1","to":"_SCs_stream1","event":{"xmi_id":"_SCe_resume_1","name":"resume","___type___":"Event"}},{"xmi_id":"_SCt_7","action":{"xmi_id":"_SCa_stop_1","code":"stopPlayback(); closeConnection();","___type___":"Action"},"___type___":"Transition","from":"_SCs_stream1","to":"_SCs_stopped1","event":{"xmi_id":"_SCe_stop_1","name":"stop","___type___":"Event"}},{"xmi_id":"_SCt_8","action":{"xmi_id":"_SCa_handleNetErr_1","code":"handleNetworkError();","___type___":"Action"},"___type___":"Transition","from":"_SCs_connect1","to":"_SCs_error1","event":{"xmi_id":"_SCe_netErr_1","name":"networkError","___type___":"Event"}},{"xmi_id":"_SCt_9","action":{"xmi_id":"_SCa_reset_1","code":"resetState();","___type___":"Action"},"___type___":"Transition","from":"_SCs_error1","to":"_SCs_stopped1","event":{"xmi_id":"_SCe_reset_1","name":"reset","___type___":"Event"}}],"states":[{"xmi_id":"_SCs_idle1","isInitial":true,"name":"Idle","___type___":"State","isFinal":false},{"xmi_id":"_SCs_connect1","isInitial":false,"name":"Connecting","___type___":"State","isFinal":false},{"xmi_id":"_SCs_buffer1","isInitial":false,"name":"Buffering","___type___":"State","isFinal":false},{"xmi_id":"_SCs_stream1","isInitial":false,"name":"StreamingInternal","___type___":"State","isFinal":false},{"xmi_id":"_SCs_paused1","isInitial":false,"name":"PausedInternal","___type___":"State","isFinal":false},{"xmi_id":"_SCs_error1","isInitial":false,"name":"Error","___type___":"State","isFinal":false},{"xmi_id":"_SCs_stopped1","isInitial":false,"name":"StoppedInternal","___type___":"State","isFinal":true}]}]}}